# These jinja2 templates translate stories
# and story metadata into markdown

story: |
  # {{ name }}
  
  {{ about }}
  
  {% if "jiras" in info %}* Fake related JIRAS: {{ info["jiras"].documentation() }}{% endif %}
  
  ## Video
  
  <img 
     src="{{ slug }}.gif?raw=1"
     height="250px"
  />
  
  ## Steps
  
  {% for step in steps %}
  {{ step.documentation() }}
  {% endfor %}
  
  {% if "context" in info %}
  {{ info["context"].documentation() }}
  {% endif %}
  
  ## Autogenerated
  
  This markdown page was automatically generated from [this story](https://github.com/hitchdev/examples/blob/master/website/story/{{ filename.name }}) [with this template](https://github.com/hitchdev/examples/blob/master/website/tests/docstory.yml).
  
  The screenshots and video recordings were autogenerated via playwright playing the story with this [story engine](https://github.com/hitchdev/examples/blob/master/website/tests/test_integration.py).
info:
  context: |
    ## Background context
    
    {{ context }}
  jiras: |
    {% for jira in jiras -%}
    [{{ jira }}](https://myproject.jira.com/{{ jira }})
    {%- if not loop.last %}, {% endif %}
    {%- endfor %}
steps:
  load website: |
    * When the website is loaded
    
    <img 
      src="{{ this_story.slug }}-{{ this_step.index }}-{{ this_step.slug }}.png?raw=1"
      height="250px"
    />

  enter: |
    * Enter text `{{ text }}` on `{{ on }}`.
    
  click: |
    * Click on `{{ on }}`.
    
  should appear: |
    {% if which -%}
    * Then text `{{ text }}` should appear on {{ which }} `{{ on }}`.
    {% else %}
    * Then text `{{ text }}` should appear on `{{ on }}`.
    {% endif %}
    
    <img 
      src="{{ this_story.slug }}-{{ this_step.index }}-{{ this_step.slug }}.png?raw=1"
      height="250px"
    />
